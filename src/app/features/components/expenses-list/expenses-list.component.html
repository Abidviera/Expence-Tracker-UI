<div class="ExpenceList">
  <div class="container-fluid">
    <div class="header">
      <h1>Expense Management</h1>
      <div class="header-actions">
        <button (click)="toggleFilters()" class="filter-button">
          <i class="fas fa-filter"></i> Filter
        </button>
        <button class="btn btn-primary"  routerLink="/features/ExpenseCreation">
          <i class="fas fa-plus"></i> New Expense
        </button>
      </div>
    </div>

    <div class="filters" *ngIf="filterSection">
        <div class="filters-header">
          <h3 class="filters-title"><i class="fas fa-sliders-h"></i> Filters</h3>
          <button class="filters-toggle" (click)="toggleFilters()">
            <i class="fas fa-chevron-up"></i> Collapse Filters
          </button>
        </div>
        
        <div class="filter-grid">
          <div class="date-range">
            <div class="filter-group">
              <label class="filter-label">Date Range</label>
              <div class="filter-control">
            
                <input type="date"  (change)="onDateFilter($any($event.target).value, filters.toDate || '')" placeholder="Start date" />
              </div>
            </div>
            <div class="filter-group">
              <label class="filter-label">&nbsp;</label>
              <div class="filter-control">
             
                <input type="date" (change)="onDateFilter(filters.fromDate || '', $any($event.target).value)" placeholder="End date" />
              </div>
            </div>
          </div>
          
          <div class="filter-group">
            <label class="filter-label">Category</label>
            <div class="filter-control select">
        
              <select>
                <option value="">All Categories</option>
                <option value="travel">Travel</option>
                <option value="meals">Meals & Entertainment</option>
                <option value="accommodation">Accommodation</option>
                <option value="transportation">Transportation</option>
                <option value="fuel">Fuel</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
          
          <div class="filter-group">
            <label class="filter-label">Min Amount</label>
            <div class="filter-control">
             
              <input type="number" (input)="onAmountFilter($any($event.target).valueAsNumber, filters.maxAmount || undefined)" placeholder="0.00" />
            </div>
          </div>
          
          <div class="filter-group">
            <label class="filter-label">Max Amount</label>
            <div class="filter-control">
           
              <input type="number" placeholder="Any" (input)="onAmountFilter(filters.minAmount || undefined, $any($event.target).valueAsNumber)"/>
            </div>
          </div>
          
          <div class="filter-group">
            <label class="filter-label">Customer</label>
            <div class="filter-control select">
         
              <select (change)="onCustomerFilter($any($event.target).value)">
                <option value="">All Customers</option>
                <option value="customer1">Acme Corporation</option>
                <option value="customer2">Globex Industries</option>
                <option value="customer3">Wayne Enterprises</option>
                <option value="customer4">Stark Industries</option>
                <option value="customer5">Oscorp</option>
              </select>
            </div>
          </div>
          
          <div class="filter-group">
            <label class="filter-label">Trip</label>
            <div class="filter-control select">
        
              <select (change)="onTripFilter($any($event.target).value)">
                <option value="">All Trips</option>
                <option value="trip1">New York Conference 2025</option>
                <option value="trip2">Tokyo Client Meeting</option>
                <option value="trip3">Sydney Product Launch</option>
                <option value="trip4">London Business Trip</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="active-filters">
          <div class="active-filter">
            Category: Meals <i class="fas fa-times-circle"></i>
          </div>
          <div class="active-filter">
            Date: Last 30 days <i class="fas fa-times-circle"></i>
          </div>
          <div class="active-filter">
            Customer: Acme Corporation <i class="fas fa-times-circle"></i>
          </div>
        </div>
        
      
      </div>

 
    <div class="search-section">
      <div class="search-box">
        <i class="bi bi-search"></i>
        <input type="text"  (input)="onSearchChange($any($event.target).value)" placeholder="Search title or description..." />
      </div>

      <div class="actions-section" *ngIf="filterSection">
        <button class="btn btn-secondary" >
          <i class="fas fa-undo"></i> Reset Filters
        </button>
        <button class="btn btn-primary">
          <i class="fas fa-filter"></i> Apply Filters
        </button>
      </div>
    </div>

    <!-- Table Section -->
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th (click)="onSortChange('date', filters.sortDirection === 'asc' ? 'desc' : 'asc')">
              Date
              <i class="fas fa-sort-up sort-icon" ></i>
            </th>
            <th>
              Customer
              <i class="fas fa-sort sort-icon"></i>
            </th>
            <th (click)="onSortChange('title', filters.sortDirection === 'asc' ? 'desc' : 'asc')">
              Title & Description
              <i class="fas fa-sort sort-icon"></i>
            </th>
            <th>
              Status
              <i class="fas fa-sort sort-icon"></i>
            </th>
            <th>
              Category
              <i class="fas fa-sort sort-icon"></i>
            </th>
            <th (click)="onSortChange('amount', filters.sortDirection === 'asc' ? 'desc' : 'asc')">
              Amount
              <i class="fas fa-sort sort-icon"></i>
            </th>

            <th style="  text-align: center;
  align-items: center;">
              Action
              <i class="fas fa-sort sort-icon"></i>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr class="table-row-highlight" *ngFor="let expense of expenses">
            <td class="date-cell">
              <i class="far fa-calendar calendar-icon"></i>
              {{ expense.date | date }}
            </td>
            <td class="customer-cell">{{ expense.customer.name }}</td>
            <td>
              <div class="expense-title">{{ expense.title }}</div>
              <div class="expense-description">
                {{ expense.description }}
              </div>
            </td>
            <td>
              <span class="status-badge status-approved">
                <i class="fas fa-check-circle"></i> Approved
              </span>
            </td>
            <td>
              <span class="category-badge">
                <i class="fas fa-utensils"></i> {{ expense.categoryName }}
              </span>
            </td>
            <td class="amount">{{ expense.amount }}</td>

            <td>
              <div class="action-buttons">
                <button class="action-btn action-update" data-tooltip="Edit">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="action-btn action-delete" data-tooltip="Delete">
                  <i class="fas fa-trash-alt"></i>
                </button>
                <button class="action-btn action-info" data-tooltip="Details">
                  <i class="fas fa-info-circle"></i>
                </button>
                <button class="action-btn action-print" data-tooltip="Print">
                  <i class="fas fa-print"></i>
                </button>
              </div>
            </td>
          </tr>

        </tbody>
      </table>
    </div>

    <!-- Pagination Section -->
    <div class="pagination">
      <div class="pagination-info">Showing 1-7 of 42 expenses</div>
      <div class="pagination-controls">
        <button class="pagination-btn" (click)="previousPage()" [disabled]="!filters.pageNumber || filters.pageNumber === 1" >
          <i class="fas fa-chevron-left"></i> Previous
        </button>
        <div class="pagination-pages">
          <button class="page-btn active">1</button>
          <button class="page-btn">2</button>
          <button class="page-btn">3</button>
          <button class="page-btn">4</button>
          <button class="page-btn">5</button>
          <button class="page-btn">...</button>
        </div>
        <button class="pagination-btn" (click)="nextPage()" [disabled]="!filters.pageNumber || !filters.pageSize || (filters.pageNumber * filters.pageSize >= totalRecords)">
          Next <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
</div>


